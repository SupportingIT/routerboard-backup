{"name":"Routerboard-backup","tagline":"Ultimate backup of yours mikrotik routerboards.","body":"# Mikrotik Routerboard Backup\r\n\r\n[![Latest Stable Version](https://poser.pugx.org/routerboard-backup/routerboard-backup/v/stable)](https://github.com/heximcz/routerboard-backup/releases)\r\n[![Build Status](https://travis-ci.org/heximcz/routerboard-backup.svg?branch=master)](https://travis-ci.org/heximcz/routerboard-backup)\r\n[![Latest Unstable Version](https://poser.pugx.org/routerboard-backup/routerboard-backup/v/unstable)](https://github.com/heximcz/routerboard-backup)\r\n[![License](https://poser.pugx.org/routerboard-backup/routerboard-backup/license)](https://github.com/heximcz/routerboard-backup/blob/master/LICENSE.md)\r\n[![codecov.io](https://codecov.io/github/heximcz/routerboard-backup/coverage.svg?branch=master)](https://codecov.io/github/heximcz/routerboard-backup?branch=master)\r\n\r\n## Overview\r\n\r\nUltimate backup of your mikrotik routerboards.\r\n\r\n## Prerequisites\r\n\r\nPHP > 5.6.x\r\n\r\n## Features\r\n\r\n* Auto generate RSA key if it does not exist.\r\n* Create a new account for backup on a routerboard with a public key\r\n* Get routerboard identity and save IP address along with this one to database\r\n* When backing up the routerboard, delete the old backup  to create new ones . Only the current backup will remain on the routerboard; it will not fill the disk with the old backup.\r\n* Create standard .backup and .rsc backup files in the form of a script\r\n* Your backups are stored on a local disk to the directories; each have in their name an identity and IP address of the backed-up device.\r\n* Your backups on the local disk are automatically replaced with the current backup. Only the last five backups remain. You will never have a full disk, even after many years to come.\r\n* If an error occurs while backing up, an email will be sent automatically \r\n\r\n## Recommended\r\n* For this backup system we recommend version **RouterOS 6.32.3**, because new versions have some problems with file transfer via SCP.\r\n* **Fixed in RouterOS 6.35rc5**\r\n\r\n## How to install\r\n\r\n - Connet via SSH to your web server\r\n\r\n```sh\r\n$ cd /opt/\r\n$ git clone https://github.com/heximcz/routerboard-backup.git\r\n$ cd /opt/routerboard-backup/\r\n$ git tag -l\r\n$ git checkout tags/<last tag name of stable version>\r\n$ cp ./config.default.yml ./config.yml\r\n$ mkdir -p /var/log/routerboard-backup/\r\n```\r\n -  **do not forget to configure the config.yml**\r\n\r\n## Create database\r\n\r\n```sh\r\n\r\nCREATE TABLE IF NOT EXISTS `routers` (\r\n  `id` int(11) NOT NULL,\r\n  `addr` char(15) COLLATE utf8_bin NOT NULL COMMENT 'IP address',\r\n  `identity` varchar(255) COLLATE utf8_bin DEFAULT NULL COMMENT 'System identity',\r\n  `created` datetime NOT NULL,\r\n  `modify` datetime DEFAULT NULL,\r\n  `lastbackup` datetime DEFAULT NULL\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin;\r\n\r\nALTER TABLE `routers`\r\n  ADD PRIMARY KEY (`id`);\r\n\r\nALTER TABLE `routers`\r\n  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT;\r\n\r\n```\r\n\r\n## How to update Routerboard Backup\r\n\r\n```sh\r\n$ cd /opt/routerboard-backup/\r\n$ git pull\r\n$ git tag -l\r\n$ git checkout tags/<last tag name of stable version>\r\n ```\r\n - How simply find out how to check the tag\r\n\r\n```sh\r\n$ git describe --tags\r\n```\r\n\r\n## Example Usage\r\n\r\nprint help:\r\n\r\n```php ./routerboard-backup.php```\r\n\r\n```php ./routerboard-backup rb:mod -h```\r\n\r\n```php ./routerboard-backup rb:backup -h```\r\n\r\n```php ./routerboard-backup rb:list -h```\r\n\r\n## Using via crontab\r\n\r\nadd this line to your /etc/crontab: (backup of all in database one per week)\r\n\r\n```0 0  * * 6   root /usr/bin/php /opt/routerboard-backup/routerboard-backup.php rb:backup >> /var/log/routerboard-backup/routerboard-backup.log```\r\n\r\n## Logrotate script\r\n\r\n```nano /etc/logrotate.d/routerboard-backup```\r\n\r\n\r\n```sh\r\n/var/log/routerboard-backup/*.log\r\n{\r\n\trotate 5\r\n\tmonthly\r\n\tcompress\r\n\tmissingok\r\n\tnotifempty\r\n}\r\n```\r\n\r\n##YouTube video: How to\r\n\r\n[![Routerboard Backup Video How To](http://img.youtube.com/vi/-bOup-f3Eeo/0.jpg)](https://www.youtube.com/watch?v=-bOup-f3Eeo)\r\n\r\n##Product microsite\r\n\r\n[https://routerboard-backup.best-hosting.cz/](https://routerboard-backup.best-hosting.cz/)\r\n\r\n## License\r\n\r\nMIT\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}